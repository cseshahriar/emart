{% extends "frontend/base.html" %}
{% load static %}
{% block title %}‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤ | {{ order.order_number }}{% endblock %}

{% block extra_css %}
<style>
/* -------- Invoice Style -------- */
.invoice-box {
    background: #fff;
    padding: 30px;
    border: 1px solid #e5e5e5;
    max-width: 900px;
    margin: auto;
    font-size: 14px;
    color: #333;
}

.invoice-header {
    border-bottom: 2px solid #eee;
    margin-bottom: 20px;
    padding-bottom: 10px;
}

.invoice-header h2 {
    margin: 0;
    font-weight: 700;
}

.invoice-details p {
    margin: 0;
    line-height: 1.6;
}

.table th {
    background: #f8f9fa;
}

/* -------- Print Style -------- */
@media print {
    body {
        background: #fff;
    }
    .no-print {
        display: none !important;
    }
    .invoice-box {
        border: none;
        padding: 0;
    }
    header, footer {
        display: none !important;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="container my-5">

    <!-- Success Message (Not Printed) -->
    <div class="alert alert-success text-center no-print">
        <h4>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá</h4>
        <p>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞: <strong>{{ order.order_number }}</strong></p>
    </div>

    <!-- Invoice -->
    <div class="invoice-box">

        <!-- Header -->
        <div class="invoice-header d-flex justify-content-between">
            <div>
                <h2>{{ SITE_NAME }}</h2>
                <small>
                    üìû  01837-724712 <br>
                    üåê {{ SITE_DOMAIN }}
                </small>
            </div>
            <div class="text-end">
                <strong>Invoice</strong><br>
                Order #: {{ order.order_number }}<br>
                Date: {{ order.created_at|date:"d M Y" }}
            </div>
        </div>

        <!-- Customer Info -->
        <div class="row mb-4 invoice-details">
            <div class="col-md-6">
                <strong>Customer Information</strong>
                <p>
                    {{ order.shipping_address.full_name|default_if_none:"" }}<br>
                    üìû {{ order.shipping_address.phone|default_if_none:"" }}<br>
                    üìç {{ order.shipping_address.address_line1|default_if_none:"" }}
                </p>
            </div>

            <div class="col-md-6 text-md-end">
                <strong>Payment Method</strong>
                <p>{{ order.get_payment_method_display }}</p>
                <strong>Status</strong>
                <p class="text-uppercase">{{ order.order_status }}</p>
            </div>
        </div>

        <!-- Order Items -->
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>‡¶™‡¶£‡ßç‡¶Ø</th>
                    <th class="text-center">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
                    <th class="text-end">‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order.items.all %}
                <tr>
                    <td>{{ item.product.name }}</td>
                    <td class="text-center">{{ item.quantity }}</td>
                    <td class="text-end">‡ß≥{{ item.total_price }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Summary -->
        <div class="row">
            <div class="col-md-6"></div>
            <div class="col-md-6">
                <table class="table">
                    <tr>
                        <th>Subtotal</th>
                        <td class="text-end">‡ß≥{{ order.subtotal }}</td>
                    </tr>
                    <tr>
                        <th>Delivery Charge</th>
                        <td class="text-end">‡ß≥{{ order.shipping_cost }}</td>
                    </tr>
                    <tr class="fw-bold">
                        <th>Total</th>
                        <td class="text-end">‡ß≥{{ order.total_amount }}</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-4">
            <small>
                ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡ßá‡¶®‡¶æ‡¶ï‡¶æ‡¶ü‡¶æ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‚ù§Ô∏è <br>
                This is a system generated invoice.
            </small>
        </div>

    </div>

    <!-- Action Buttons -->
    <div class="text-center mt-4 no-print">
        <button onclick="window.print()" class="btn btn-dark me-2">
            üñ®Ô∏è ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
        </button>

        <a href="/" class="btn btn-primary">
            ‡¶ï‡ßá‡¶®‡¶æ‡¶ï‡¶æ‡¶ü‡¶æ ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶®
        </a>
    </div>

</div>
{% endblock %}
