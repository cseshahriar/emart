{% extends 'frontend/base.html' %}
{% load static %}
{% block title %}Home Page | Shorna Mart{% endblock %}

{% block extra_css %}
<style>
    /* Slider background */
    .single-slider {
        padding: 60px 0;
    }
    /* Ensure image stays right */
    .single-slider .image {
        text-align: right;
    }
    /* Prevent image overflow */
    .single-slider .image img {
        max-width: 100%;
        height: auto;
    }
    /* Optional: better text contrast */
    .single-slider .content h2,
    .single-slider .content p,
    .single-slider .content h3 {
        color: #111;
    }
    span.text-danger.d-inline-block.ml-2 {
        margin-left: 50px !important;
    }
    .slider-head.border {
        margin-right: 10px;
    }
</style>
{% endblock %}

{% block content %}
    {% if slider_products %}
    <!-- Start Hero Area -->
    <section class="hero-area">
        <div class="container">
            <div class="row">
                <!-- slider section -->
                <div
                    {% if not most_popular_product %}
                        class="col-lg-12 col-12 custom-padding-right"
                    {% else %}
                        class="col-lg-8 col-12 custom-padding-right"
                    {% endif %}
                >
                    <div class="slider-head border">
                        <div class="hero-slider">

                            {% for product in slider_products %}
                            <div class="single-slider">
                                <div class="container">
                                    <div class="row align-items-center">

                                        <!-- LEFT CONTENT -->
                                        <div class="col-lg-6 col-md-6 col-12">
                                            <div class="content">
                                                <h3>
                                                    <span>{{ product.category.name }}</span><br>
                                                    {{ product.name }}
                                                </h3>

                                                <p>
                                                    {{ product.short_description|default:product.description|truncatechars:120 }}
                                                </p>

                                                <h3>
                                                    <span>Now Only</span>
                                                    ৳{{ product.base_price }}
                                                </h3>

                                                <div class="button">
                                                    <a href="" class="btn add-cart">
                                                        Buy Now
                                                    </a>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- RIGHT IMAGE (THIS IS THE KEY FIX) -->
                                        <div class="col-lg-6 col-md-6 col-12">
                                            <div class="image">
                                                {% if product.feature_image %}
                                                    <img src="{{ product.feature_image.image.url }}"
                                                        alt="{{ product.name }}">
                                                {% else %}
                                                    <img src="https://placehold.net/600x400.png"
                                                        alt="Default">
                                                {% endif %}
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            {% endfor %}

                        </div>
                    </div>
                </div>

                {% if most_popular_product %}
                    <!-- most popular product / most sale product -->
                    <div class="col-lg-4 col-12 border">
                        <div class="row g-1"> <!-- Minimal gap -->

                            <!-- TINY MOST POPULAR -->
                            <div class="col-lg-12 col-md-6 col-12">
                                <div class="card border-0 shadow-sm mt-3" style="height: 240px;">
                                    <div class="row g-0 h-100">
                                        <!-- Image -->
                                        <div class="col-6 h-100">
                                            <div class="h-100 w-100"
                                                style="background:
                                                url('{% if most_popular_product and most_popular_product.feature_image %}{{ most_popular_product.feature_image.image.url }}{% else %}https://placehold.co/120x150/png{% endif %}')
                                                center center / cover no-repeat;">
                                                <span class="badge bg-danger position-absolute top-0 start-0 m-1 px-1 py-0" style="font-size: 0.6rem;">
                                                    <i class="fas fa-fire"></i>
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Content -->
                                        <div class="col-6">
                                            <div class="p-2 h-100 d-flex flex-column">

                                                <!-- Product name (top) -->
                                                <h6 class="fw-bold mb-1 text-left"
                                                    style="font-size: 0.85rem; line-height: 1.1;">
                                                    {{ most_popular_product.name|default_if_none:"" }}
                                                </h6>

                                                <!-- Features (center vertically) -->
                                                {% if most_popular_product.features.all %}
                                                    <div class="flex-grow-1 d-flex justify-content-left align-items-left text-left">
                                                        <div class="features-list" style="font-size: 0.7rem;">
                                                            {% for feature in most_popular_product.features.all %}
                                                                <div class="d-flex align-items-left justify-content-left mb-1">
                                                                    <span class="me-1" style="color:#2563eb;">•</span>
                                                                    <small class="text-muted">{{ feature }}</small>
                                                                </div>
                                                            {% endfor %}
                                                        </div>
                                                    </div>
                                                {% endif %}

                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <!-- TINY SALE BANNER -->
                            <div class="col-lg-12 col-md-6 col-12 p-1">
                                <div class="card border-0 shadow-sm text-white" style="height: 120px; background: #fff;">
                                    <div class="card-body p-2 d-flex flex-column justify-content-between">
                                        <!-- Price at the bottom -->
                                        <div class="mt-2 pt-1">
                                            <div class="text-success fw-bold text-white" style="font-size: 0.9rem;">
                                                <h5> ৳{{ most_popular_product.base_price|default:"" }}
                                                    <del class="text-danger"> ৳ {{ most_popular_product.compare_price|default:"" }}</del>
                                                </h5>
                                            </div>
                                        </div>

                                        <div class="button">
                                            <a href="" class="btn add-cart">
                                                Buy Now
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                {% endif %}

            </div>
        </div>
    </section>
    <!-- End Hero Area -->
    {% endif %}

    {% if categories %}
    <!-- Start Category Section Area -->
    <section class="category-section section">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-title m-0">
                        <h2 class="m-0">Featured Categories</h2>
                </div>
            </div>

            <div class="row g-3 mb-5">
                {% for category in categories %}
                <!-- Category Item -->
                <div class="col-lg-2 col-md-3 col-4">
                    <div class="category-card">
                        {% comment %} <img src="{% static 'assets/images/products/product-1.jpg' %}" alt="Anklets"> {% endcomment %}
                        <h6><a href="/category/{{category.slug}}">{{ category }}</a></h6>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <!-- End Category Section Area -->
    {% endif %}

    {% if featured_products %}
    <!-- Start Featured Product Area -->
    <section class="trending-product section">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-title">
                        <h2>Featured Products</h2>
                </div>
            </div>
            <div class="row">
                {% for product in featured_products %}
                    <div class="col-lg-3 col-md-6 col-12">
                        <!-- Start Single Product -->
                        <div class="single-product">

                            <div class="product-image">
                                <img
                                    {% if product.feature_image %}
                                        src="{{ product.feature_image.image.url }}"
                                    {% endif %}
                                    alt="#" />
                            </div>

                            <div class="product-info">
                                <h4 class="title">
                                    <a href="{% url 'product_detail' product.slug %}">{{ product.name }}</a>
                                </h4>

                                <div class="price">
                                    <span>৳ {{ product.base_price }}</span>
                                    <span class="text-secondary d-inline-block ml-2"><del>৳ {{ product.compare_price }}</del></span>
                                </div>

                                <!-- Product Buttons -->
                                <div class="product-buttons">
                                    <a href="/buy-now/{{ product.slug }}" class="btn btn-primary">
                                        <i class="lni lni-cart"></i>   Buy Now
                                    </a>
                                    <a href="/add-to-cart/{{ product.slug }}" class="btn btn-outline-secondary">
                                        <i class="lni lni-cart-1"></i> Add to Cart
                                    </a>
                                </div>
                            </div>

                        </div>
                        <!-- End Single Product -->
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
    <!-- End Featured Product Area -->
    {% endif %}

    {% if new_products %}
    <!-- Start New Trends Product Area -->
    <section class="trending-product section">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-title">
                        <h2>New Trends</h2>
                </div>
            </div>
            <div class="row">
                {% for product in new_products %}
                    <div class="col-lg-3 col-md-6 col-12">
                        <!-- Start Single Product -->
                        <div class="single-product">

                            <div class="product-image">
                                <img
                                    {% if product.feature_image %}
                                        src="{{ product.feature_image.image.url }}"
                                    {% endif %}
                                    alt="#" />
                            </div>

                            <div class="product-info">
                                <h4 class="title">
                                    <a href="{% url 'product_detail' product.slug %}">{{ product.name }}</a>
                                </h4>

                                <div class="price">
                                    <span>৳ {{ product.base_price }}</span>
                                    <span class="text-secondary d-inline-block ml-2"><del>৳ {{ product.compare_price }}</del></span>
                                </div>

                                <!-- Product Buttons -->
                                <!-- Product Buttons -->
                                <div class="product-buttons">
                                    <a href="/buy-now/{{ product.slug }}" class="btn btn-primary">
                                        <i class="lni lni-cart"></i>   Buy Now
                                    </a>
                                    <a href="/add-to-cart/{{ product.slug }}" class="btn btn-outline-secondary">
                                        <i class="lni lni-cart-1"></i> Add to Cart
                                    </a>
                                </div>
                            </div>

                        </div>
                        <!-- End Single Product -->
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
    <!-- End New Trends Product Area -->
    {% endif %}

    {% if bestseller_products %}
    <!-- Start Best Seller Products Area -->
    <section class="trending-product section">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-title">
                        <h2>Best Seller Products</h2>
                </div>
            </div>
            <div class="row">
                {% for product in bestseller_products %}
                    <div class="col-lg-3 col-md-6 col-12">
                        <!-- Start Single Product -->
                        <div class="single-product">

                            <div class="product-image">
                                <img
                                    {% if product.feature_image %}
                                        src="{{ product.feature_image.image.url }}"
                                    {% endif %}
                                    alt="#" />
                            </div>

                            <div class="product-info">
                                <h4 class="title">
                                    <a href="{% url 'product_detail' product.slug %}">{{ product.name }}</a>
                                </h4>

                                <div class="price">
                                    <span>৳ {{ product.base_price }}</span>
                                    <span class="text-secondary d-inline-block ml-2"><del>৳ {{ product.compare_price }}</del></span>
                                </div>

                                <!-- Product Buttons -->
                                <!-- Product Buttons -->
                                <div class="product-buttons">
                                    <a href="/buy-now/{{ product.slug }}" class="btn btn-primary">
                                        <i class="lni lni-cart"></i>   Buy Now
                                    </a>
                                    <a href="/add-to-cart/{{ product.slug }}" class="btn btn-outline-secondary">
                                        <i class="lni lni-cart-1"></i> Add to Cart
                                    </a>
                                </div>
                            </div>

                        </div>
                        <!-- End Single Product -->
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
    <!-- End Best Seller Products Area -->
    {% endif %}

    {% if top_rated_products %}
    <!-- Start Top Rated Product Area -->
    <section class="trending-product section">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-title">
                        <h2>Top Rated Products</h2>
                </div>
            </div>
            <div class="row">
                {% for product in top_rated_products %}
                    <div class="col-lg-3 col-md-6 col-12">
                        <!-- Start Single Product -->
                        <div class="single-product">

                            <div class="product-image">
                                <img
                                    {% if product.feature_image %}
                                        src="{{ product.feature_image.image.url }}"
                                    {% endif %}
                                    alt="#" />
                            </div>

                            <div class="product-info">
                                <h4 class="title">
                                    <a href="/product-detail/{{ product.slug}}">{{ product.name }}</a>
                                </h4>

                                <div class="price">
                                    <span>৳ {{ product.base_price }}</span>
                                    <span class="text-secondary d-inline-block ml-2"><del>৳ {{ product.compare_price }}</del></span>
                                </div>

                                <!-- Product Buttons -->
                                <!-- Product Buttons -->
                                <div class="product-buttons">
                                    <a href="/buy-now/{{ product.slug }}" class="btn btn-primary">
                                        <i class="lni lni-cart"></i>   Buy Now
                                    </a>
                                    <a href="/add-to-cart/{{ product.slug }}" class="btn btn-outline-secondary">
                                        <i class="lni lni-cart-1"></i> Add to Cart
                                    </a>
                                </div>
                            </div>

                        </div>
                        <!-- End Single Product -->
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
    <!-- End Top Rated Product Area -->
    {% endif %}

{% endblock %}

{% block extra_js %}{% endblock %}